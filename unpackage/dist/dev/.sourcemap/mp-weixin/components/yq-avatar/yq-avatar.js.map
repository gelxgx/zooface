{"version":3,"sources":["webpack:///D:/zooseefun/zooface/components/yq-avatar/yq-avatar.vue?85c8","webpack:///D:/zooseefun/zooface/components/yq-avatar/yq-avatar.vue?2da8","webpack:///D:/zooseefun/zooface/components/yq-avatar/yq-avatar.vue?75f9","webpack:///D:/zooseefun/zooface/components/yq-avatar/yq-avatar.vue?df3c","uni-app:///components/yq-avatar/yq-avatar.vue","webpack:///D:/zooseefun/zooface/components/yq-avatar/yq-avatar.vue?ee22","webpack:///D:/zooseefun/zooface/components/yq-avatar/yq-avatar.vue?5768"],"names":[],"mappings":"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ANA;AAOA,6CAPA;AAQA,gDARA;;AAUA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA,eADA;AAEA,eAFA;AAGA,uBAHA;AAIA,yBAJA;AAKA,2BALA;AAMA,6BANA;AAOA,8BAPA;AAQA,uBARA;AASA,0BATA;AAUA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;;AAEA,SArDA;AAsDA;AACA;AACA,8BADA;AAEA,0BAFA;;AAIA,SA3DA;AA4DA;AACA;AACA;AACA;AACA,SAhEA;AAiEA,UAjEA;;AAmEA,KAjWA;AAkWA,aAlWA,uBAkWA;AACA;AACA,mCADA;AAEA,8BAFA;AAGA,gCAHA;AAIA,qCAJA;AAKA,8BALA;AAMA,4CANA;AAOA,kCAPA;AAQA,8CARA;AASA,gDATA;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kGANA;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA,kGANA;;AAQA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA,OARA,MAQA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iCADA;AAEA,+BAFA;AAGA,mCAHA;AAIA,qCAJA;AAKA,0BALA;AAMA,kCANA;AAOA,gCAPA;AAQA,wCARA;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;AAKA;;AAEA;AACA;AACA,OAXA;;AAaA;AACA,KAldA;AAmdA,cAndA,wBAmdA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,WAFA;AAGA,SAJA,EAIA,EAJA;AAKA,OANA,MAMA;AACA;AACA;;;;;;;;AAQA,KArfA;AAsfA,YAtfA,sBAsfA;AACA;AACA;AACA;AACA;AACA;AACA,KA5fA;AA6fA,UA7fA,oBA6fA;AACA;AACA;AACA;AACA;AACA;AACA,KAngBA;AAogBA,YApgBA,sBAogBA;AACA;AACA;AACA;;AAEA;AACA,8BADA;AAEA,6BAFA;AAGA,mCAHA;AAIA,qCAJA;;AAMA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA,YADA;AAEA,YAFA;AAGA,oBAHA;AAIA,sBAJA;AAKA,iCALA;AAMA,uBANA;AAOA,0BAPA;AAQA;AACA;;AAEA;AACA,mCADA;AAEA,gDAFA;AAGA,oDAHA;AAIA,sDAJA;AAKA,8BALA;AAMA,+BANA;AAOA,qCAPA;AAQA,qCARA;AASA;AACA;AACA;AACA,WAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AASA;AACA;AACA;AACA;;AAEA,SAlDA;AAmDA;AACA;AACA,2BADA;AAEA,0BAFA;;AAIA,SAxDA;AAyDA;AACA;AACA,SA3DA;AA4DA,UA5DA;;AA8DA,KApoBA;AAqoBA,cAroBA,wBAqoBA;AACA;AACA;AACA,oCADA;AAEA,kCAFA;AAGA,oCAHA;AAIA,gCAJA;AAKA,oCALA;AAMA,kCANA;AAOA,kCAPA;AAQA,kCARA;AASA,gCATA;AAUA,4BAVA;AAWA,0BAXA;;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAnrBA;AAorBA,WAprBA,qBAorBA;AACA;AACA;AACA;AACA;AACA,KAzrBA;AA0rBA,UA1rBA,kBA0rBA,CA1rBA,EA0rBA;AACA;AACA,yBADA;AAEA,yBAFA;;AAIA;AACA;;AAEA;AACA;AACA,+BADA;AAEA;A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","file":"components/yq-avatar/yq-avatar.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./yq-avatar.vue?vue&type=template&id=795a15bc&name=yq-avatar&\"\nvar renderjs\nimport script from \"./yq-avatar.vue?vue&type=script&lang=js&\"\nexport * from \"./yq-avatar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./yq-avatar.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/yq-avatar/yq-avatar.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./yq-avatar.vue?vue&type=template&id=795a15bc&name=yq-avatar&\"","var components = {\n  wLoading: function() {\n    return import(\n      /* webpackChunkName: \"components/w-loading/w-loading\" */ \"@/components/w-loading/w-loading.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var s0 = _vm.__get_style([_vm.imgStyle])\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        s0: s0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./yq-avatar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./yq-avatar.vue?vue&type=script&lang=js&\"","<template name=\"yq-avatar\">\n\t<view>\n\t\t<image :src=\"imgSrc.imgSrc\" @click=\"fSelect\" :style=\"[ imgStyle ]\" class=\"my-avatar\"></image>\n\t\t<canvas canvas-id=\"avatar-canvas\" id=\"avatar-canvas\" class=\"my-canvas\" :style=\"{top: styleTop, height: cvsStyleHeight}\" disable-scroll=\"false\"></canvas>\n\t\t<canvas canvas-id=\"oper-canvas\" id=\"oper-canvas\" class=\"oper-canvas\" :style=\"{top: styleTop, height: cvsStyleHeight}\" disable-scroll=\"false\" @touchstart=\"fStart\" @touchmove=\"fMove\" @touchend=\"fEnd\"></canvas>\n\t\t<canvas canvas-id=\"prv-canvas\" id=\"prv-canvas\" class=\"prv-canvas\" disable-scroll=\"false\" @touchstart=\"fHideImg\"\t:style=\"{ height: cvsStyleHeight, top: prvTop }\"></canvas>\n\t\t<view class=\"oper-wrapper\" :style=\"{display: styleDisplay}\">\n\t\t\t<view class=\"oper\">\n\t\t\t\t<view class=\"btn-wrapper\" v-if=\"showOper\">\n\t\t\t\t\t<view @click=\"fSelect\"  hover-class=\"hover\" :style=\"{width: btnWidth}\"><text>重选</text></view>\n\t\t\t\t\t<view @click=\"fClose\"  hover-class=\"hover\" :style=\"{width: btnWidth}\"><text>关闭</text></view>\n\t\t\t\t\t<view @click=\"fRotate\"  hover-class=\"hover\" :style=\"{width: btnWidth, display: btnDsp}\"><text>旋转</text></view>\n\t\t\t\t\t<view @click=\"fPreview\" hover-class=\"hover\" :style=\"{width: btnWidth}\"><text>预览</text></view>\n\t\t\t\t\t<view @click=\"fUpload\"  hover-class=\"hover\" :style=\"{width: btnWidth}\"><text>上传</text></view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"clr-wrapper\" v-else>\n\t\t\t\t\t<slider class=\"my-slider\" @change=\"fColorChange\"\n\t\t\t\t\tblock-size=\"25\" value=\"0\" min=\"-100\" max=\"100\" activeColor=\"red\" backgroundColor=\"green\" block-color=\"grey\" show-value></slider>\n\t\t\t\t\t<view @click=\"fPrvUpload\"  hover-class=\"hover\" :style=\"{width: btnWidth}\"><text>上传</text></view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\r\n\t\t<w-loading text=\"化身动物中..\" mask=\"true\" click=\"true\" ref=\"loading\"></w-loading>\n\t</view>\n</template>\n\t\n<script>\n\tconst tabHeight = 50;\n\texport default {\n\t\tname: \"yq-avatar\",\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tcvsStyleHeight: '0px',\n\t\t\t\tstyleDisplay: 'none',\n\t\t\t\tstyleTop: '-10000px',\n\t\t\t\tprvTop: '-10000px',\n\t\t\t\timgStyle: {},\n\t\t\t\tselStyle: {},\n\t\t\t\tshowOper: true,\n\t\t\t\timgSrc: {\n\t\t\t\t\timgSrc: ''\n\t\t\t\t},\n\t\t\t\tbtnWidth: '19%',\n\t\t\t\tbtnDsp: 'flex',\n\t\t\t};\n\t\t},\n\t\twatch: {\n\t\t\tavatarSrc() {\n\t\t\t\tthis.imgSrc.imgSrc = this.avatarSrc;\n\t\t\t}\n\t\t},\n\t\tprops:{\n\t\t\tavatarSrc: '',\n\t\t\tavatarStyle: '',\n\t\t\tselWidth: '',\n\t\t\tselHeight: '',\n\t\t\texpWidth: '',\n\t\t\texpHeight: '',\n\t\t\tminScale: '',\n\t\t\tmaxScale: '',\n\t\t\tcanScale: '',\n\t\t\tcanRotate: '',\n\t\t\tlockWidth: '',\n\t\t\tlockHeight: '',\n\t\t\tstretch: '',\n\t\t\tlock: '',\n\t\t\tnoTab: '',\n\t\t\tinner: '',\n\t\t\tquality: '',\n\t\t\tindex: '',\r\n\t\t\tbgImage: '',\n\t\t},\n\t\tcreated() {\n\t\t\tthis.ctxCanvas = uni.createCanvasContext('avatar-canvas', this);\n\t\t\tthis.ctxCanvasOper = uni.createCanvasContext('oper-canvas', this);\n\t\t\tthis.ctxCanvasPrv = uni.createCanvasContext('prv-canvas', this);\n\t\t\tthis.qlty = parseInt(this.quality) || 0.9;\n\t\t\tthis.imgSrc.imgSrc = this.avatarSrc;\n\t\t\tthis.letRotate = (this.canRotate === 'false' || this.inner === 'true') ? 0 : 1;\n\t\t\tthis.letScale = this.canScale === 'false' ? 0 : 1;\n\t\t\tthis.isin = this.inner === 'true' ? 1 : 0;\n\t\t\tthis.indx = this.index || undefined;\n\t\t\tthis.mnScale = this.minScale || 0.3;\n\t\t\tthis.mxScale = this.maxScale || 4;\n\t\t\tthis.noBar = this.noTab === 'true' ? 1 : 0;\n\t\t\tthis.stc = this.stretch;\n\t\t\tthis.lck = this.lock;\n\t\t\tif(this.isin) {\n\t\t\t\tthis.btnWidth = '24%';\n\t\t\t\tthis.btnDsp = 'none';\n\t\t\t} else {\n\t\t\t\tthis.btnWidth = '19%';\n\t\t\t\tthis.btnDsp = 'flex';\n\t\t\t}\n\t\t\t\n\t\t\tif(this.noBar) {\n\t\t\t\tthis.moreHeight = 0;\n\t\t\t\tthis.fWindowResize();\n\t\t\t} else {\n\t\t\t\tuni.showTabBar({\n\t\t\t\t\tcomplete:(res) => {\n\t\t\t\t\t\tthis.moreHeight = (res.errMsg === 'showTabBar:ok') ? 50 : 0;\n\t\t\t\t\t\tthis.fWindowResize();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tfWindowResize() {\n\t\t\t\tlet sysInfo = uni.getSystemInfoSync();\n\t\t\t\tthis.platform = sysInfo.platform;\n\t\t\t\tthis.pixelRatio = sysInfo.pixelRatio;\n\t\t\t\tthis.windowWidth = sysInfo.windowWidth;\n\t\t\t\t// #ifdef H5\n\t\t\t\tthis.drawTop = sysInfo.windowTop;\n\t\t\t\tthis.windowHeight = sysInfo.windowHeight + sysInfo.windowBottom;\n\t\t\t\tthis.cvsStyleHeight = this.windowHeight - tabHeight + 'px';\n\t\t\t\t// #endif\n\t\t\t\t// #ifdef APP-PLUS\n\t\t\t\tif(this.platform === 'android') {\n\t\t\t\t\t//this.windowHeight = sysInfo.screenHeight + sysInfo.statusBarHeight;\r\n\t\t\t\t\tthis.windowHeight = sysInfo.screenHeight + this.moreHeight;\n\t\t\t\t\tthis.cvsStyleHeight = this.windowHeight - tabHeight + 'px';\n\t\t\t\t} else {\n\t\t\t\t\tthis.windowHeight = sysInfo.windowHeight + this.moreHeight;\n\t\t\t\t\tthis.cvsStyleHeight = this.windowHeight - tabHeight + 6 + 'px';\n\t\t\t\t}\n\t\t\t\t// #endif\n\t\t\t\t// #ifdef MP\n\t\t\t\tthis.windowHeight = sysInfo.windowHeight + this.moreHeight;\n\t\t\t\tthis.cvsStyleHeight = this.windowHeight - tabHeight - 2 + 'px';\n\t\t\t\t// #endif\n\t\t\t\n\t\t\t\t// #ifdef MP-ALIPAY\n\t\t\t\tthis.windowHeight = sysInfo.screenHeight - sysInfo.statusBarHeight - sysInfo.titleBarHeight;\n\t\t\t\tthis.cvsStyleHeight = this.windowHeight - tabHeight - 2 + 'px';\n\t\t\t\t// #endif\n\t\t\t\tthis.pxRatio = this.windowWidth/750;\n\t\t\t\t\n\t\t\t\tlet style = this.avatarStyle;\n\t\t\t\tif(style && style !== true && (style=style.trim()) ) {\n\t\t\t\t\tstyle = style.split(';');\n\t\t\t\t\tlet obj = {};\n\t\t\t\t\tfor( let v of style ) {\n\t\t\t\t\t\tif(!v) continue;\n\t\t\t\t\t\tv = v.trim().split(':');\n\t\t\t\t\t\tif(v[1].indexOf('upx') >= 0) {\n\t\t\t\t\t\t\tlet arr = v[1].trim().split(' ');\n\t\t\t\t\t\t\tfor( let k in arr ) {\n\t\t\t\t\t\t\t\tif(!arr[k]) continue;\n\t\t\t\t\t\t\t\tif(arr[k].indexOf('upx') >= 0) {\n\t\t\t\t\t\t\t\t\tarr[k] = parseFloat(arr[k]) * this.pxRatio + 'px';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tv[1] = arr.join(' ');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tobj[v[0].trim()] = v[1].trim();\n\t\t\t\t\t}\n\t\t\t\t\tthis.imgStyle = obj;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.expWidth && (this.exportWidth = this.expWidth.indexOf('upx') >= 0 ? parseInt(this.expWidth)*this.pxRatio : parseInt(this.expWidth));\n\t\t\t\tthis.expHeight && (this.exportHeight = this.expHeight.indexOf('upx') >= 0 ? parseInt(this.expHeight)*this.pxRatio : parseInt(this.expHeight));\n\t\t\t\t\n\t\t\t\tif(this.styleDisplay === 'flex') {\n\t\t\t\t\tthis.fDrawInit(true);\n\t\t\t\t}\n\t\t\t\tthis.fHideImg();\n\t\t\t},\n\t\t\tfSelect() {\n\t\t\t\tif(this.fSelecting) return;\n\t\t\t\tthis.fSelecting = true;\n\t\t\t\tsetTimeout(()=>{ this.fSelecting = false; }, 500);\n\t\t\t\t\n\t\t\t\tuni.chooseImage({\n\t\t\t\t\tcount: 1,\n\t\t\t\t\tsizeType: ['original', 'compressed'],\r\n\t\t\t\t\t// #ifdef MP-WEIXIN \r\n\t\t\t\t\tsourceType: ['album'],\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t// sourceType: ['album', 'camera'],\n\t\t\t\t\tsuccess: (r)=>{\n\t\t\t\t\t\t//this.$refs.loading.open()\n\t\t\t\t\t\tlet path = this.imgPath = r.tempFilePaths[0];\n\t\t\t\t\t\tuni.getImageInfo({\n\t\t\t\t\t\t\tsrc: path,\n\t\t\t\t\t\t\tsuccess: r => {\n\t\t\t\t\t\t\t\tthis.imgWidth = r.width;\n\t\t\t\t\t\t\t\tthis.imgHeight = r.height;\n\t\t\t\t\t\t\t\tthis.path = path;\n\t\t\t\t\t\t\t\tif( !this.hasSel ) {\n\t\t\t\t\t\t\t\t\tlet style = this.selStyle || {};\n\t\t\t\t\t\t\t\t\tif( this.selWidth && this.selHeight ) {\n\t\t\t\t\t\t\t\t\t\tlet selWidth  = this.selWidth.indexOf('upx')  >= 0 ? parseInt(this.selWidth)  * this.pxRatio: parseInt(this.selWidth),\n\t\t\t\t\t\t\t\t\t\t\tselHeight = this.selHeight.indexOf('upx') >= 0 ? parseInt(this.selHeight) * this.pxRatio: parseInt(this.selHeight);\n\t\t\t\t\t\t\t\t\t\tstyle.width = selWidth + 'px';\n\t\t\t\t\t\t\t\t\t\tstyle.height = selHeight + 'px';\n\t\t\t\t\t\t\t\t\t\tstyle.top = (this.windowHeight - selHeight - tabHeight)/2 + 'px';\n\t\t\t\t\t\t\t\t\t\tstyle.left = (this.windowWidth - selWidth)/2 + 'px';\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\t\ttitle: '裁剪框的宽或高没有设置',\n\t\t\t\t\t\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tthis.selStyle = style;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(\tthis.noBar ) {\n\t\t\t\t\t\t\t\t\tthis.fDrawInit(true);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tuni.hideTabBar({\n\t\t\t\t\t\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\t\t\t\t\t\tthis.fDrawInit(true);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: ()=>{\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: \"error3\",\n\t\t\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcomplete() {\r\n\t\t\t\t\t\t\t\t//this.$refs.loading.close()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tfUpload() {\n\t\t\t\tif(this.fUploading)\treturn;\n\t\t\t\tthis.fUploading = true;\n\t\t\t\tsetTimeout(()=>{ this.fUploading = false; }, 1000)\n\t\t\t\t\n\t\t\t\tlet style = this.selStyle,\n\t\t\t\t\tx = parseInt(style.left),\n\t\t\t\t\ty = parseInt(style.top),\n\t\t\t\t\twidth = parseInt(style.width),\n\t\t\t\t\theight = parseInt(style.height),\n\t\t\t\t\texpWidth = this.exportWidth || width,\n\t\t\t\t\texpHeight = this.exportHeight || height;\n\t\t\t\t\t\n\t\t\t\tthis.$refs.loading.open()\n\t\t\t\tthis.styleDisplay = 'none';\n\t\t\t\tthis.styleTop = '-10000px';\n\t\t\t\tthis.hasSel = false;\n\t\t\t\tthis.fHideImg();\n\t\t\t// #ifdef MP-ALIPAY\n\t\t\tthis.ctxCanvas.toTempFilePath({\n\t\t\t\tx: x,\n\t\t\t\ty: y,\n\t\t\t\twidth: width,\n\t\t\t\theight: height,\n\t\t\t\tdestWidth: expWidth,\n\t\t\t\tdestHeight: expHeight,\n\t\t\t\tfileType: 'png',\n\t\t\t\tquality: this.qlty,\n\t\t\t\tsuccess: (r)=>{\n\t\t\t\t\tr = r.apFilePath;\n\t\t\t\t\tthis.$emit(\"upload\", {avatar: this.imgSrc, path: r, index: this.indx, data: this.rtn});\n\t\t\t\t},\n\t\t\t\tfail: (res)=>{\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: \"error1\",\n\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tcomplete: () => {\r\n\t\t\t\t\tthis.$refs.loading.close()\n\t\t\t\t\t// uni.hideLoading();\n\t\t\t\t\tthis.noBar || uni.showTabBar();\n\t\t\t\t}\n\t\t\t});\n\t\t\t// #endif\n\t\t\t// #ifndef MP-ALIPAY\n\t\t\t\tuni.canvasToTempFilePath({\n\t\t\t\t\tx: x,\n\t\t\t\t\ty: y,\n\t\t\t\t\twidth: width,\n\t\t\t\t\theight: height,\n\t\t\t\t\tdestWidth: expWidth,\n\t\t\t\t\tdestHeight: expHeight,\n\t\t\t\t\tcanvasId: 'avatar-canvas',\n\t\t\t\t\tfileType: 'png',\n\t\t\t\t\tquality: this.qlty,\n\t\t\t\t\tsuccess: (r)=>{\n\t\t\t\t\t\tr = r.tempFilePath;\n\t\t\t\t\t\t// #ifdef H5\n\t\t\t\t\t\tthis.btop(r).then((r)=> {\n\t\t\t\t\t\t\tif(this.exportWidth && this.exportHeight) {\n\t\t\t\t\t\t\t\tlet ctxCanvas = this.ctxCanvas;\n\t\t\t\t\t\t\t\texpWidth = this.exportWidth,\n\t\t\t\t\t\t\t\texpHeight = this.exportHeight;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tctxCanvas.drawImage(r, 0, 0, expWidth, expHeight);\n\t\t\t\t\t\t\t\tctxCanvas.draw(false,()=>{\n\t\t\t\t\t\t\t\t\tuni.canvasToTempFilePath({\n\t\t\t\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\t\t\t\ty: 0,\n\t\t\t\t\t\t\t\t\t\twidth: expWidth,\n\t\t\t\t\t\t\t\t\t\theight: expHeight,\n\t\t\t\t\t\t\t\t\t\tdestWidth: expWidth,\n\t\t\t\t\t\t\t\t\t\tdestHeight: expHeight,\n\t\t\t\t\t\t\t\t\t\tcanvasId: 'avatar-canvas',\n\t\t\t\t\t\t\t\t\t\tfileType: 'png',\n\t\t\t\t\t\t\t\t\t\tquality: this.qlty,\n\t\t\t\t\t\t\t\t\t\tsuccess: (r)=>{\n\t\t\t\t\t\t\t\t\t\t\tr = r.tempFilePath;\n\t\t\t\t\t\t\t\t\t\t\tthis.btop(r).then((r)=> {\n\t\t\t\t\t\t\t\t\t\t\t\tthis.$emit(\"upload\", {avatar: this.imgSrc, path: r, index: this.indx, data: this.rtn});\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tfail: ()=>{\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"error0\",\n\t\t\t\t\t\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.$emit(\"upload\", {avatar: this.imgSrc, path: r, index: this.indx, data: this.rtn});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t// #endif\n\t\t\t\t\t\t// #ifndef H5\n\t\t\t\t\t\tthis.$emit(\"upload\", {avatar: this.imgSrc, path: r, index: this.indx, data: this.rtn});\n\t\t\t\t\t\t// #endif\n\t\t\t\t\t},\n\t\t\t\t\tfail: (res)=>{\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: \"error1\",\n\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\tthis.noBar || uni.showTabBar();\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t// #endif\n\t\t\t},\n\t\t\tfPrvUpload() {\n\t\t\t\tif(this.fPrvUploading)\treturn;\n\t\t\t\tthis.fPrvUploading = true;\n\t\t\t\tsetTimeout(()=>{ this.fPrvUploading = false; }, 1000)\n\t\t\t\t\n\t\t\t\tlet style = this.selStyle,\n\t\t\t\t\tdestWidth = parseInt(style.width),\n\t\t\t\t\tdestHeight = parseInt(style.height),\n\t\t\t\t\tprvX = this.prvX,\n\t\t\t\t\tprvY = this.prvY,\n\t\t\t\t\tprvWidth = this.prvWidth,\n\t\t\t\t\tprvHeight = this.prvHeight,\n\t\t\t\t\texpWidth = this.exportWidth || prvWidth,\n\t\t\t\t\texpHeight = this.exportHeight || prvHeight;\n\t\t\t\t\t\n\t\t\t\tthis.$refs.loading.open()\n\t\t\t\t\n\t\t\t\tthis.styleDisplay = 'none';\n\t\t\t\tthis.styleTop = '-10000px';\n\t\t\t\tthis.hasSel = false;\n\t\t\t\tthis.fHideImg();\n\t\t\t\t// #ifdef MP-ALIPAY\n\t\t\t\tthis.ctxCanvasPrv.toTempFilePath({\n\t\t\t\t\tx: prvX,\n\t\t\t\t\ty: prvY,\n\t\t\t\t\twidth: prvWidth,\n\t\t\t\t\theight: prvHeight,\n\t\t\t\t\tdestWidth: expWidth,\n\t\t\t\t\tdestHeight: expHeight,\n\t\t\t\t\tfileType: 'png',\n\t\t\t\t\tquality: this.qlty,\n\t\t\t\t\tsuccess: (r)=>{\n\t\t\t\t\t\tr = r.apFilePath;\n\t\t\t\t\t\tthis.$emit(\"upload\", {avatar: this.imgSrc, path: r, index: this.indx, data: this.rtn});\n\t\t\t\t\t},\n\t\t\t\t\tfail: ()=>{\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: \"error_prv\",\n\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: () => {\r\n\t\t\t\t\t\tthis.$refs.loading.close()\n\t\t\t\t\t\t// uni.hideLoading();\n\t\t\t\t\t\tthis.noBar || uni.showTabBar();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t// #endif\n\t\t\t\t// #ifndef MP-ALIPAY\n\t\t\t\tuni.canvasToTempFilePath({\n\t\t\t\t\tx: prvX,\n\t\t\t\t\ty: prvY,\n\t\t\t\t\twidth: prvWidth,\n\t\t\t\t\theight: prvHeight,\n\t\t\t\t\tdestWidth: expWidth,\n\t\t\t\t\tdestHeight: expHeight,\n\t\t\t\t\tcanvasId: 'prv-canvas',\n\t\t\t\t\tfileType: 'png',\n\t\t\t\t\tquality: this.qlty,\n\t\t\t\t\tsuccess: (r)=>{\n\t\t\t\t\t\tr = r.tempFilePath;\n\t\t\t\t\t\t// #ifdef H5\n\t\t\t\t\t\tthis.btop(r).then((r)=> {\n\t\t\t\t\t\t\tif(this.exportWidth && this.exportHeight) {\n\t\t\t\t\t\t\t\tlet ctxCanvas = this.ctxCanvas;\n\t\t\t\t\t\t\t\texpWidth = this.exportWidth,\n\t\t\t\t\t\t\t\texpHeight = this.exportHeight;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tctxCanvas.drawImage(r, 0, 0, expWidth, expHeight);\n\t\t\t\t\t\t\t\tctxCanvas.draw(false, ()=>{\n\t\t\t\t\t\t\t\t\tuni.canvasToTempFilePath({\n\t\t\t\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\t\t\t\ty: 0,\n\t\t\t\t\t\t\t\t\t\twidth: expWidth,\n\t\t\t\t\t\t\t\t\t\theight: expHeight,\n\t\t\t\t\t\t\t\t\t\tdestWidth: expWidth,\n\t\t\t\t\t\t\t\t\t\tdestHeight: expHeight,\n\t\t\t\t\t\t\t\t\t\tcanvasId: 'avatar-canvas',\n\t\t\t\t\t\t\t\t\t\tfileType: 'png',\n\t\t\t\t\t\t\t\t\t\tquality: this.qlty,\n\t\t\t\t\t\t\t\t\t\tsuccess: (r)=>{\n\t\t\t\t\t\t\t\t\t\t\tr = r.tempFilePath;\n\t\t\t\t\t\t\t\t\t\t\tthis.btop(r).then((r)=> {\n\t\t\t\t\t\t\t\t\t\t\t\tthis.$emit(\"upload\", {avatar: this.imgSrc, path: r, index: this.indx, data: this.rtn});\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tfail: ()=>{\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"error0\",\n\t\t\t\t\t\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.$emit(\"upload\", {avatar: this.imgSrc, path: r, index: this.indx, data: this.rtn});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t// #endif\n\t\t\t\t\t\t// #ifndef H5\n\t\t\t\t\t\tthis.$emit(\"upload\", {avatar: this.imgSrc, path: r, index: this.indx, data: this.rtn});\n\t\t\t\t\t\t// #endif\n\t\t\t\t\t},\n\t\t\t\t\tfail: ()=>{\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: \"error_prv\",\n\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: () => {\r\n\t\t\t\t\t\tthis.$refs.loading.close()\n\t\t\t\t\t\t// uni.hideLoading();\n\t\t\t\t\t\tthis.noBar || uni.showTabBar();\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t\t// #endif\n\t\t\t},\n\t\t\tfDrawInit(ini=false) {\n\t\t\t\tlet allWidth = this.windowWidth,\n\t\t\t\t\tallHeight = this.windowHeight,\n\t\t\t\t\timgWidth = this.imgWidth,\n\t\t\t\t\timgHeight = this.imgHeight,\n\t\t\t\t\timgRadio = imgWidth/imgHeight,\n\t\t\t\t\tuseWidth = allWidth - 40,\n\t\t\t\t\tuseHeight = allHeight - tabHeight - 80,\n\t\t\t\t\tpixelRatio = this.pixelRatio,\n\t\t\t\t\tselWidth = parseInt(this.selStyle.width),\n\t\t\t\t\tselHeight = parseInt(this.selStyle.height);\n\t\t\t\t\n\t\t\t\tthis.fixWidth = 0;\n\t\t\t\tthis.fixHeight = 0;\n\t\t\t\tthis.lckWidth = 0;\n\t\t\t\tthis.lckHeight = 0;\n\t\t\t\tswitch(this.stc) {\n\t\t\t\t\tcase 'x': this.fixWidth = 1; break;\n\t\t\t\t\tcase 'y': this.fixHeight = 1; break;\n\t\t\t\t\tcase 'long': if(imgRadio > 1) this.fixWidth = 1; else this.fixHeight = 1; break;\n\t\t\t\t\tcase 'short': if(imgRadio > 1) this.fixHeight = 1; else this.fixWidth = 1; break;\n\t\t\t\t\tcase 'longSel': if(selWidth > selHeight) this.fixWidth = 1; else this.fixHeight = 1; break;\n\t\t\t\t\tcase 'shortSel': if(selWidth > selHeight) this.fixHeight = 1; else this.fixWidth = 1; break;\n\t\t\t\t}\n\t\t\t\tswitch(this.lck) {\n\t\t\t\t\tcase 'x': this.lckWidth = 1; break;\n\t\t\t\t\tcase 'y': this.lckHeight = 1; break;\n\t\t\t\t\tcase 'long': if(imgRadio > 1) this.lckWidth = 1; else this.lckHeight = 1; break;\n\t\t\t\t\tcase 'short': if(imgRadio > 1) this.lckHeight = 1; else this.lckWidth = 1; break;\n\t\t\t\t\tcase 'longSel': if(selWidth > selHeight) this.lckWidth = 1; else this.lckHeight = 1; break;\n\t\t\t\t\tcase 'shortSel': if(selWidth > selHeight) this.lckHeight = 1; else this.lckWidth = 1; break;\n\t\t\t\t}\n\t\t\t\tif( this.fixWidth ) {\n\t\t\t\t\tuseWidth = selWidth;\n\t\t\t\t\tuseHeight = useWidth/imgRadio;\n\t\t\t\t} else if( this.fixHeight ) {\n\t\t\t\t\tuseHeight = selHeight;\n\t\t\t\t\tuseWidth = useHeight*imgRadio;\n\t\t\t\t} else if( imgRadio < 1 ) {\n\t\t\t\t\tif( imgHeight < useHeight ) {\n\t\t\t\t\t\tuseWidth = imgWidth;\n\t\t\t\t\t\tuseHeight = imgHeight;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuseHeight = useHeight;\n\t\t\t\t\t\tuseWidth = useHeight*imgRadio;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif( imgWidth < useWidth ) {\n\t\t\t\t\t\tuseWidth = imgWidth;\n\t\t\t\t\t\tuseHeight = imgHeight;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuseWidth = useWidth;\n\t\t\t\t\t\tuseHeight = useWidth/imgRadio;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif( this.isin ) {\n\t\t\t\t\tthis.scaleWidth = 0;\n\t\t\t\t\tthis.scaleHeight = 0;\n\t\t\t\t\tif(useWidth < selWidth) {\n\t\t\t\t\t\tuseWidth = selWidth;\n\t\t\t\t\t\tuseHeight = useWidth/imgRadio;\n\t\t\t\t\t\tthis.lckHeight = 0;\n\t\t\t\t\t}\n\t\t\t\t\tif(useHeight < selHeight) {\n\t\t\t\t\t\tuseHeight = selHeight;\n\t\t\t\t\t\tuseWidth = useHeight*imgRadio;\n\t\t\t\t\t\tthis.lckWidth = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.scaleSize = 1;\n\t\t\t\tthis.rotateDeg = 0;\n\t\t\t\tthis.posWidth = (allWidth-useWidth)/2;\n\t\t\t\tthis.posHeight = (allHeight-useHeight-tabHeight)/2;\n\t\t\t\tthis.useWidth = useWidth;\n\t\t\t\tthis.useHeight = useHeight;\n\t\t\t\t\n\t\t\t\tlet style = this.selStyle,\n\t\t\t\t\tleft = parseInt(style.left),\n\t\t\t\t\ttop = parseInt(style.top),\n\t\t\t\t\twidth = parseInt(style.width),\n\t\t\t\t\theight = parseInt(style.height),\n\t\t\t\t\tcanvas = this.canvas,\n\t\t\t\t\tcanvasOper = this.canvasOper,\n\t\t\t\t\tctxCanvas = this.ctxCanvas,\n\t\t\t\t\tctxCanvasOper = this.ctxCanvasOper;\n\t\t\t\t\t\r\n\t\t\t\tctxCanvasOper.setLineWidth(3);\n\t\t\t\tctxCanvasOper.setStrokeStyle('grey');\n\t\t\t\tctxCanvasOper.setGlobalAlpha(0.4);\n\t\t\t\tctxCanvasOper.strokeRect( left, top, width, height );\n\t\t\t\tctxCanvasOper.setStrokeStyle('red');\n\t\t\t\tctxCanvasOper.moveTo(left+20, top);ctxCanvasOper.lineTo(left, top);ctxCanvasOper.lineTo(left, top+20);\n\t\t\t\tctxCanvasOper.moveTo(left+width-20, top);ctxCanvasOper.lineTo(left+width, top);ctxCanvasOper.lineTo(left+width, top+20);\n\t\t\t\tctxCanvasOper.moveTo(left+20, top+height);ctxCanvasOper.lineTo(left, top+height);ctxCanvasOper.lineTo(left, top+height-20);\n\t\t\t\tctxCanvasOper.moveTo(left+width-20, top+height);ctxCanvasOper.lineTo(left+width, top+height);ctxCanvasOper.lineTo(left+width, top+height-20);\n\t\t\t\tctxCanvasOper.stroke();\n\t\t\t\t\n\t\t\t\tctxCanvasOper.draw(false, ()=>{\n\t\t\t\t\tif( ini ) {\n\t\t\t\t\t\tthis.styleDisplay = 'flex';\n\t\t\t\t\t\t// #ifdef H5\n\t\t\t\t\t\tthis.styleTop = this.drawTop + 'px';\n\t\t\t\t\t\t// #endif\n\t\t\t\t\t\t// #ifndef H5\n\t\t\t\t\t\tthis.styleTop = '0';\n\t\t\t\t\t\t// #endif\n\t\t\t\t\t\tthis.fDrawImage(true);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.$emit(\"avtinit\");\n\t\t\t},\n\t\t\tfDrawImage(ini=false) {\n\t\t\t\tlet tm_now = Date.now();\n\t\t\t\tif(tm_now - this.drawTm < 20) return;\n\t\t\t\tthis.drawTm = tm_now;\n\t\t\t\tlet ctxCanvas = this.ctxCanvas; \n\t\t\t\t\n\t\t\t\tctxCanvas.translate(this.posWidth+this.useWidth/2, this.posHeight+this.useHeight/2);\n\t\t\t\t\r\n\t\t\t\tif(this.bgImage) {\r\n\t\t\t\t\tctxCanvas.drawImage(this.bgImage, -this.posWidth-this.useWidth/2, -this.posHeight-this.useHeight/2,this.windowWidth, this.windowHeight-tabHeight);\r\n\t\t\t\t} else {\n\t\t\t\t\tctxCanvas.fillRect(-this.posWidth-this.useWidth/2, -this.posHeight-this.useHeight/2, this.windowWidth, this.windowHeight-tabHeight);\r\n\t\t\t\t}\n\t\t\t\tctxCanvas.scale(this.scaleSize, this.scaleSize);\n\t\t\t\tctxCanvas.rotate(this.rotateDeg * Math.PI/180);\r\n\t\t\t\tctxCanvas.drawImage(this.imgPath, -this.useWidth/2, -this.useHeight/2, this.useWidth, this.useHeight);\n\t\t\t\t\n\t\t\t\t// #ifndef MP-ALIPAY\n\t\t\t\tif(ini){\r\n\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\tctxCanvas.draw(true,()=>{\r\n\t\t\t\t\t\t\tthis.fDrawImage();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}, 20);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tctxCanvas.draw(false);\r\n\t\t\t\t}\n\t\t\t\t// #endif\n\t\t\t\t// #ifdef MP-ALIPAY\n\t\t\t\tctxCanvas.draw(true);\n\t\t\t\tctxCanvas.rotate(-this.rotateDeg * Math.PI/180);\n\t\t\t\tctxCanvas.scale(1/this.scaleSize, 1/this.scaleSize);\n\t\t\t\tctxCanvas.translate(-this.posWidth-this.useWidth/2, -this.posHeight-this.useHeight/2);\n\t\t\t\t// #endif\r\n\t\t\t},\n\t\t\tfHideImg() {\n\t\t\t\tthis.prvImg = '';\n\t\t\t\tthis.prvTop = '-10000px';\n\t\t\t\tthis.showOper = true;\n\t\t\t\tthis.prvImgData = null;\n\t\t\t\tthis.target = null;\r\n\t\t\t},\n\t\t\tfClose() {\n\t\t\t\tthis.styleDisplay = 'none';\n\t\t\t\tthis.styleTop = '-10000px';\n\t\t\t\tthis.hasSel = false;\n\t\t\t\tthis.fHideImg();\n\t\t\t\tthis.noBar || uni.showTabBar();\n\t\t\t},\n\t\t\tfPreview() {\n\t\t\t\tif(this.fPreviewing) return;\n\t\t\t\tthis.fPreviewing = true;\n\t\t\t\tsetTimeout(()=>{ this.fPreviewing = false; }, 1000);\n\t\t\t\t\n\t\t\t\tlet style = this.selStyle,\n\t\t\t\t\tx = parseInt(style.left),\n\t\t\t\t\ty = parseInt(style.top),\n\t\t\t\t\twidth = parseInt(style.width),\n\t\t\t\t\theight = parseInt(style.height);\n\t\t\t\t\n\t\t\t\tthis.$refs.loading.open()\n\t\t\t\t\n\t\t\t\t// #ifdef MP-ALIPAY\n\t\t\t\tthis.ctxCanvas.toTempFilePath({\n\t\t\t\t\tx: x,\n\t\t\t\t\ty: y,\n\t\t\t\t\twidth: width,\n\t\t\t\t\theight: height,\n\t\t\t\t\tfileType: 'png',\n\t\t\t\t\tquality: this.qlty,\n\t\t\t\t\tsuccess: (r)=>{\n\t\t\t\t\t\tthis.prvImgTmp = r = r.apFilePath;\n\t\t\t\t\t\t\n\t\t\t\t\t\tlet ctxCanvasPrv = this.ctxCanvasPrv,\n\t\t\t\t\t\t\tprvX = this.windowWidth,\n\t\t\t\t\t\t\tprvY = parseInt(this.cvsStyleHeight),\n\t\t\t\t\t\t\tprvWidth = parseInt(this.selStyle.width),\n\t\t\t\t\t\t\tprvHeight = parseInt(this.selStyle.height),\n\t\t\t\t\t\t\tuseWidth = prvX - 40,\n\t\t\t\t\t\t\tuseHeight = prvY - 80,\n\t\t\t\t\t\t\tradio = useWidth/prvWidth,\n\t\t\t\t\t\t\trHeight = prvHeight*radio;\n\t\t\t\t\t\t\tif(rHeight < useHeight) {\n\t\t\t\t\t\t\t\tprvWidth = useWidth;\n\t\t\t\t\t\t\t\tprvHeight = rHeight;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tradio = useHeight/prvHeight;\n\t\t\t\t\t\t\t\tprvWidth *= radio;\n\t\t\t\t\t\t\t\tprvHeight = useHeight;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tctxCanvasPrv.setFillStyle('black');\n\t\t\t\t\t\tctxCanvasPrv.fillRect(0, 0, prvX, prvY);\r\n\t\t\t\t\t\t// ctxCanvasPrv.drawImage(this.bgImage, 0, 0, prvX, prvY); 预览显示背景图\n\t\t\t\t\t\tthis.prvX = prvX = (prvX-prvWidth)/2;\n\t\t\t\t\t\tthis.prvY = prvY = (prvY-prvHeight)/2;\n\t\t\t\t\t\tthis.prvWidth = prvWidth;\n\t\t\t\t\t\tthis.prvHeight = prvHeight;\n\t\t\t\t\t\tctxCanvasPrv.drawImage(r, prvX, prvY, prvWidth, prvHeight);\n\t\t\t\t\t\tctxCanvasPrv.draw(false);\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.showOper = false;\n\t\t\t\t\t\tthis.prvTop = '0';\n\t\t\t\t\t},\n\t\t\t\t\tfail: ()=>{\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: \"error2\",\n\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t})\n\t\t\t\t\t}, \n\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\tthis.$refs.loading.close()\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t// #endif\n\t\t\t\t// #ifndef MP-ALIPAY\n\t\t\t\tuni.canvasToTempFilePath({\n\t\t\t\t\tx: x,\n\t\t\t\t\ty: y,\n\t\t\t\t\twidth: width,\n\t\t\t\t\theight: height,\n\t\t\t\t\tcanvasId: 'avatar-canvas',\n\t\t\t\t\tfileType: 'png',\n\t\t\t\t\tquality: this.qlty,\n\t\t\t\t\tsuccess: (r)=>{\n\t\t\t\t\t\tthis.prvImgTmp = r = r.tempFilePath;\n\t\t\t\t\t\t\n\t\t\t\t\t\tlet ctxCanvasPrv = this.ctxCanvasPrv,\n\t\t\t\t\t\t\tprvX = this.windowWidth,\n\t\t\t\t\t\t\tprvY = parseInt(this.cvsStyleHeight),\n\t\t\t\t\t\t\tprvWidth = parseInt(this.selStyle.width),\n\t\t\t\t\t\t\tprvHeight = parseInt(this.selStyle.height),\n\t\t\t\t\t\t\tuseWidth = prvX - 40,\n\t\t\t\t\t\t\tuseHeight = prvY - 80,\n\t\t\t\t\t\t\tradio = useWidth/prvWidth,\n\t\t\t\t\t\t\trHeight = prvHeight*radio;\n\t\t\t\t\t\t\tif(rHeight < useHeight) {\n\t\t\t\t\t\t\t\tprvWidth = useWidth;\n\t\t\t\t\t\t\t\tprvHeight = rHeight;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tradio = useHeight/prvHeight;\n\t\t\t\t\t\t\t\tprvWidth *= radio;\n\t\t\t\t\t\t\t\tprvHeight = useHeight;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tctxCanvasPrv.setFillStyle('black');\n\t\t\t\t\t\tctxCanvasPrv.fillRect(0, 0, prvX, prvY);\r\n\t\t\t\t\t\t// ctxCanvasPrv.drawImage(this.bgImage, 0, 0, prvX, prvY); 预览显示背景图\n\t\t\t\t\t\tthis.prvX = prvX = (prvX-prvWidth)/2;\n\t\t\t\t\t\tthis.prvY = prvY = (prvY-prvHeight)/2;\n\t\t\t\t\t\tthis.prvWidth = prvWidth;\n\t\t\t\t\t\tthis.prvHeight = prvHeight;\n\t\t\t\t\t\tctxCanvasPrv.drawImage(r, prvX, prvY, prvWidth, prvHeight);\n\t\t\t\t\t\tctxCanvasPrv.draw(false);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// #ifdef H5\n\t\t\t\t\t\tthis.btop(r).then((r)=> {\n\t\t\t\t\t\t\tthis.showOper = false;\n\t\t\t\t\t\t\tthis.prvTop = this.drawTop + 'px';\n\t\t\t\t\t\t})\n\t\t\t\t\t\t// #endif\n\t\t\t\t\t\t// #ifndef H5\r\n\t\t\t\t\t\tif( this.platform != 'android' ) {\n\t\t\t\t\t\t\tthis.showOper = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.prvTop = '0';\n\t\t\t\t\t\t// #endif\n\t\t\t\t\t},\n\t\t\t\t\tfail: ()=>{\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: \"error2\",\n\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t})\n\t\t\t\t\t}, \n\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\tthis.$refs.loading.close()\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t\t// #endif\n\t\t\t},\n\t\t\tfChooseImg(index=undefined, params=undefined, data=undefined) {\n\t\t\t\tif(params) {\n\t\t\t\t\tlet selWidth = params.selWidth,\n\t\t\t\t\t\tselHeight = params.selHeight,\n\t\t\t\t\t\texpWidth = params.expWidth,\n\t\t\t\t\t\texpHeight = params.expHeight,\n\t\t\t\t\t\tquality = params.quality,\n\t\t\t\t\t\tcanRotate = params.canRotate,\n\t\t\t\t\t\tcanScale = params.canScale,\n\t\t\t\t\t\tminScale = params.minScale,\n\t\t\t\t\t\tmaxScale = params.maxScale,\n\t\t\t\t\t\tstretch = params.stretch,\n\t\t\t\t\t\tinner = params.inner,\n\t\t\t\t\t\tlock = params.lock;\n\t\t\t\t\t\t\n\t\t\t\t\texpWidth && (this.exportWidth = expWidth.indexOf('upx') >= 0 ? parseInt(expWidth)*this.pxRatio : parseInt(expWidth));\n\t\t\t\t\texpHeight && (this.exportHeight = expHeight.indexOf('upx') >= 0 ? parseInt(expHeight)*this.pxRatio : parseInt(expHeight));\n\t\t\t\t\tthis.letRotate = canRotate === 'false' ? 0 : 1;\n\t\t\t\t\tthis.letScale = canScale === 'false' ? 0 : 1;\n\t\t\t\t\tthis.qlty = parseInt(quality) || 0.9;\n\t\t\t\t\tthis.mnScale = minScale || 0.3;\n\t\t\t\t\tthis.mxScale = maxScale || 4;\n\t\t\t\t\tthis.stc = stretch;\n\t\t\t\t\tthis.isin = inner === 'true' ? 1 : 0;\n\t\t\t\t\tthis.lck = lock;\n\t\t\t\t\tif(this.isin) {\n\t\t\t\t\t\tthis.btnWidth = '24%';\n\t\t\t\t\t\tthis.btnDsp = 'none';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.btnWidth = '19%';\n\t\t\t\t\t\tthis.btnDsp = 'flex';\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif( selWidth && selHeight) {\n\t\t\t\t\t\tselWidth  = selWidth.indexOf('upx')  >= 0 ? parseInt(selWidth)  * this.pxRatio: parseInt(selWidth);\n\t\t\t\t\t\tselHeight = selHeight.indexOf('upx') >= 0 ? parseInt(selHeight) * this.pxRatio: parseInt(selHeight);\n\t\t\t\t\t\tthis.selStyle.width = selWidth + 'px';\n\t\t\t\t\t\tthis.selStyle.height = selHeight + 'px';\n\t\t\t\t\t\tthis.selStyle.top = (this.windowHeight - selHeight - tabHeight)/2 + 'px';\n\t\t\t\t\t\tthis.selStyle.left = (this.windowWidth - selWidth)/2 + 'px';\n\t\t\t\t\t\tthis.hasSel = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.rtn = data;\n\t\t\t\tthis.indx = index;\n\t\t\t\tthis.fSelect();\n\t\t\t},\n\t\t\tfRotate() {\r\n\t\t\t\t// if(this.letRotate) {\n\t\t\t\t\tthis.rotateDeg += 90 - this.rotateDeg%90;\n\t\t\t\t\tthis.fDrawImage();\n\t\t\t\t// }\n\t\t\t},\n\t\t\tfStart(e) {\n\t\t\t\tlet touches = e.touches,\n\t\t\t\ttouch0 = touches[0],\n\t\t\t\ttouch1 = touches[1];\n\t\t\t\t\n\t\t\t\tthis.touch0 = touch0;\n\t\t\t\tthis.touch1 = touch1;\n\t\t\t\t\n\t\t\t\tif( touch1 ) {\n\t\t\t\t\tlet x = touch1.x - touch0.x,\n\t\t\t\t\t\ty = touch1.y - touch0.y;\n\t\t\t\t\tthis.fgDistance = Math.sqrt(x * x + y * y);\n\t\t\t\t}\n\t\t\t},\n\t\t\tfMove(e) {\r\n\t\t\t\tlet touches = e.touches,\n\t\t\t\t\ttouch0 = touches[0],\n\t\t\t\t\ttouch1 = touches[1];\n\t\t\t\t\n\t\t\t\tif( touch1 ) {\n\t\t\t\t\tlet x = touch1.x - touch0.x,\n\t\t\t\t\t\ty = touch1.y - touch0.y,\n\t\t\t\t\t\tfgDistance = Math.sqrt(x * x + y * y),\n\t\t\t\t\t\tscaleSize = 0.005 * (fgDistance - this.fgDistance),\n\t\t\t\t\t\tbeScaleSize = this.scaleSize + scaleSize;\n\t\t\t\t\t\t\n\t\t\t\t\tdo\t{\n\t\t\t\t\t\tif( !this.letScale ) break;\n\t\t\t\t\t\tif( beScaleSize < this.mnScale) break;\n\t\t\t\t\t\tif( beScaleSize > this.mxScale) break;\n\t\t\t\t\t\tif(this.isin) {\n\t\t\t\t\t\t\tlet\timgWidth = this.useWidth*beScaleSize,\n\t\t\t\t\t\t\t\timgHeight = this.useHeight*beScaleSize,\n\t\t\t\t\t\t\t\trx0 = this.posWidth+this.useWidth/2,\n\t\t\t\t\t\t\t\try0 = this.posHeight+this.useHeight/2,\n\t\t\t\t\t\t\t\tl = rx0-imgWidth/2, t = ry0-imgHeight/2,\n\t\t\t\t\t\t\t\tr = l+imgWidth,\t    b = t+imgHeight,\n\t\t\t\t\t\t\t\tleft = parseInt(this.selStyle.left),\n\t\t\t\t\t\t\t\ttop = parseInt(this.selStyle.top),\n\t\t\t\t\t\t\t\twidth = parseInt(this.selStyle.width),\n\t\t\t\t\t\t\t\theight = parseInt(this.selStyle.height);\n\t\t\t\t\t\t\t\tif(left < l || left+width > r || top < t || top+height > b) break;\n\t\t\t\t\t\t\t\tthis.scaleWidth = (this.useWidth-imgWidth)/2;\n\t\t\t\t\t\t\t\tthis.scaleHeight = (this.useHeight-imgHeight)/2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.scaleSize = beScaleSize;\n\t\t\t\t\t} while(0);\n\t\t\t\t\tthis.fgDistance = fgDistance;\n\t\t\t\n\t\t\t\t\tif(touch1.x !== touch0.x && this.letRotate) {\n\t\t\t\t\t\tx = (this.touch1.y - this.touch0.y)/(this.touch1.x - this.touch0.x);\n\t\t\t\t\t\ty = (touch1.y - touch0.y)/(touch1.x - touch0.x);\n\t\t\t\t\t\tthis.rotateDeg += Math.atan((y-x)/(1+x*y)) * 180/Math.PI;\n\t\t\t\t\t\tthis.touch0 = touch0;\n\t\t\t\t\t\tthis.touch1 = touch1;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.fDrawImage();\n\t\t\t\t} else if( this.touch0 ) {\n\t\t\t\t\tlet x = touch0.x - this.touch0.x,\n\t\t\t\t\t\ty = touch0.y - this.touch0.y,\n\t\t\t\t\t\tbeX = this.posWidth + x,\n\t\t\t\t\t\tbeY = this.posHeight + y;\n\t\t\t\t\tif(this.isin) {\n\t\t\t\t\t\tlet\timgWidth = this.useWidth*this.scaleSize,\n\t\t\t\t\t\t\timgHeight = this.useHeight*this.scaleSize,\n\t\t\t\t\t\t\trx0 = beX+this.useWidth/2,\n\t\t\t\t\t\t\try0 = beY+this.useHeight/2,\n\t\t\t\t\t\t\tl = rx0-imgWidth/2, t = ry0-imgHeight/2,\n\t\t\t\t\t\t\tr = l+imgWidth,\t    b = t+imgHeight,\n\t\t\t\t\t\t\tleft = parseInt(this.selStyle.left),\n\t\t\t\t\t\t\ttop = parseInt(this.selStyle.top),\n\t\t\t\t\t\t\twidth = parseInt(this.selStyle.width),\n\t\t\t\t\t\t\theight = parseInt(this.selStyle.height);\n\t\t\t\t\t\t\tif(!this.lckWidth && Math.abs(x) < 100) {\n\t\t\t\t\t\t\t\tif(left >= l && left+width <= r) {\n\t\t\t\t\t\t\t\t\tthis.posWidth  = beX;\n\t\t\t\t\t\t\t\t} else if(left < l){\n\t\t\t\t\t\t\t\t\tthis.posWidth = left - this.scaleWidth; \n\t\t\t\t\t\t\t\t} else if(left+width > r) {\n\t\t\t\t\t\t\t\t\tthis.posWidth = left-(imgWidth-width) - this.scaleWidth;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(!this.lckHeight && Math.abs(y) < 100) {\n\t\t\t\t\t\t\t\tif(top >= t && top+height <= b) {\n\t\t\t\t\t\t\t\t\tthis.posHeight  = beY;\n\t\t\t\t\t\t\t\t} else if(top < t) {\n\t\t\t\t\t\t\t\t\tthis.posHeight = top - this.scaleHeight;\n\t\t\t\t\t\t\t\t} else if(top+height > b) {\n\t\t\t\t\t\t\t\t\tthis.posHeight = top-(imgHeight-height) - this.scaleHeight;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif( Math.abs(x) < 100 && !this.lckWidth) this.posWidth  = beX;\n\t\t\t\t\t\tif( Math.abs(y) < 100 && !this.lckHeight) this.posHeight = beY;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.touch0 = touch0;\r\n\t\t\t\t\tthis.fDrawImage();\n\t\t\t\t}\n\t\t\t},\n\t\t\tfEnd(e) {\n\t\t\t\tlet touches = e.touches,\n\t\t\t\t\ttouch0 = touches && touches[0],\n\t\t\t\t\ttouch1 = touches && touches[1];\n\t\t\t\tif(touch0) {\n\t\t\t\t\tthis.touch0 = touch0;\n\t\t\t\t} else {\n\t\t\t\t\tthis.touch0 = null;\n\t\t\t\t\tthis.touch1 = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\tfGetImgData() {\n\t\t\t\treturn new Promise((resolve, reject)=>{\n\t\t\t\t\tlet prvX = this.prvX,\n\t\t\t\t\t\tprvY = this.prvY,\n\t\t\t\t\t\tprvWidth = this.prvWidth,\n\t\t\t\t\t\tprvHeight = this.prvHeight;\n\t\t\t\t\t// #ifdef MP-ALIPAY\n\t\t\t\t\tthis.ctxCanvasPrv.getImageData({\n\t\t\t\t\t\tx: prvX,\n\t\t\t\t\t\ty: prvY,\n\t\t\t\t\t\twidth: prvWidth,\n\t\t\t\t\t\theight: prvHeight,\n\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\tresolve(res.data);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail(err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this);\n\t\t\t\t\t// #endif\n\t\t\t\t\t// #ifndef MP-ALIPAY\n\t\t\t\t\tuni.canvasGetImageData({\n\t\t\t\t\t\tcanvasId: 'prv-canvas',\n\t\t\t\t\t\tx: prvX,\n\t\t\t\t\t\ty: prvY,\n\t\t\t\t\t\twidth: prvWidth,\n\t\t\t\t\t\theight: prvHeight,\n\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\tresolve(res.data);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail(err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this);\n\t\t\t\t\t// #endif\n\t\t\t\t});\n\t\t\t},\n\t\t\tasync fColorChange(e) {\n\t\t\t\tlet tm_now = Date.now();\n\t\t\t\tif(tm_now - this.prvTm < 100) return;\n\t\t\t\tthis.prvTm = tm_now;\n\t\t\t\t\n\t\t\t\tthis.$refs.loading.open()\n\t\t\t\t\n\t\t\t\tif( !this.prvImgData ) {\n\t\t\t\t\tif( !(this.prvImgData = await this.fGetImgData().catch((res)=>{\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: \"error_read\",\n\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t})\n\t\t\t\t\t}))) return;\n\t\t\t\t\tthis.target = new Uint8ClampedArray(this.prvImgData.length);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlet data = this.prvImgData,\n\t\t\t\t\ttarget = this.target,\n\t\t\t\t\ti = e.detail.value,\n\t\t\t\t\tr,g,b,a,h,s,l,d,p,q,t,min,max,hK,tR,tG,tB;\n\t\t\t\t\t\n\t\t\t\tif( i === 0 ) {\n\t\t\t\t\ttarget = data;\n\t\t\t\t} else {\n\t\t\t\t\ti = (i+100)/200;\n\t\t\t\t\tif( i < 0.005 ) i = 0;\n\t\t\t\t\tif( i > 0.995 ) i = 1;\n\t\t\t\t\tfor( let n = data.length-1; n >= 0; n-=4 ) {\n\t\t\t\t\t\tr = data[n-3] / 255;\n\t\t\t\t\t\tg = data[n-2] / 255;\n\t\t\t\t\t\tb = data[n-1] / 255;\n\t\t\t\t\t\tmax = Math.max(r,g,b);\n\t\t\t\t\t\tmin = Math.min(r,g,b);\n\t\t\t\t\t\td = max-min;\n\t\t\t\t\t\tif ( max === min ){\n\t\t\t\t\t\t\th = 0 ;\n\t\t\t\t\t\t}else if( max === r && g>=b ){\n\t\t\t\t\t\t\th = 60*( (g-b)/d ) ;\n\t\t\t\t\t\t}else if( max === r && g<b ){\n\t\t\t\t\t\t\th = 60*( (g-b)/d ) + 360 ;\n\t\t\t\t\t\t}else if( max === g ){\n\t\t\t\t\t\t\th = 60*( (b-r)/d ) + 120 ;\n\t\t\t\t\t\t}else if( max === b ){\n\t\t\t\t\t\t\th = 60*( (r-g)/d ) + 240 ;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tl = (max+min)/2 ;\n\t\t\t\t\t\tif ( l===0 || max===min ){\n\t\t\t\t\t\t\ts = 0 ;\n\t\t\t\t\t\t}else if( 0<l && l<=0.5 ){\n\t\t\t\t\t\t\ts = d/(2*l) ;\n\t\t\t\t\t\t}else if( l>0.5 ){\n\t\t\t\t\t\t\ts = d/(2-2*l) ;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdata[n] && (a = data[n]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ( i < 0.5 ){\n\t\t\t\t\t\t\ts = s*i/0.5 ;\n\t\t\t\t\t\t}else if ( i > 0.5 ){\n\t\t\t\t\t\t\ts = 2*s + 2*i - (s*i/0.5) - 1 ;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ( s === 0 ){\n\t\t\t\t\t\t\tr = g = b = Math.round( l*255 ) ;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif ( l<0.5 ){\n\t\t\t\t\t\t\t\tq = l * ( 1 + s ) ;\n\t\t\t\t\t\t\t}else if( l>=0.5 ){\n\t\t\t\t\t\t\t\tq = l + s - ( l * s ) ;\n\t\t\t\t\t\t\t}      \n\t\t\t\t\t\t\tp = 2*l-q ;\n\t\t\t\t\t\t\thK = h/360 ;\n\t\t\t\t\t\t\ttR = hK + 1/3 ;\n\t\t\t\t\t\t\ttG = hK ;\n\t\t\t\t\t\t\ttB = hK - 1/3 ;\n\t\t\t\t\t\t\tlet correctRGB = (t)=>{\n\t\t\t\t\t\t\t\tif( t<0 ){\n\t\t\t\t\t\t\t\t\treturn t + 1.0 ;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif( t>1 ){\n\t\t\t\t\t\t\t\t\treturn t - 1.0 ;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn t ;\n\t\t\t\t\t\t\t} ;\n\t\t\t\t\t\t\tlet createRGB = (t)=>{\n\t\t\t\t\t\t\t\tif ( t<(1/6) ){\n\t\t\t\t\t\t\t\t\treturn p+((q-p)*6*t) ;\n\t\t\t\t\t\t\t\t}else if( t>=(1/6) && t<(1/2) ){\n\t\t\t\t\t\t\t\t\treturn q ;\n\t\t\t\t\t\t\t\t}else if( t>=(1/2) && t<(2/3) ){\n\t\t\t\t\t\t\t\t\treturn p+((q-p)*6*((2/3)-t)) ;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn p ;\n\t\t\t\t\t\t\t} ;\n\t\t\t\t\t\t\tr = tR = Math.round( createRGB( correctRGB( tR ) )*255 ) ;\n\t\t\t\t\t\t\tg = tG = Math.round( createRGB( correctRGB( tG ) )*255 ) ;\n\t\t\t\t\t\t\tb = tB = Math.round( createRGB( correctRGB( tB ) )*255 ) ;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ta && ( target[n] = a ) ;  \n\t\t\t\t\t\ttarget[n-3] = r;\n\t\t\t\t\t\ttarget[n-2] = g;\n\t\t\t\t\t\ttarget[n-1] = b;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet prvX = this.prvX,\n\t\t\t\t\tprvY = this.prvY,\n\t\t\t\t\tprvWidth = this.prvWidth,\n\t\t\t\t\tprvHeight = this.prvHeight;\n\t\t\t\t\t\n\t\t\t\tthis.ctxCanvasPrv.draw(false);\r\n\t\t\t\t\n\t\t\t\t// #ifdef MP-ALIPAY\n\t\t\t\tthis.ctxCanvasPrv.putImageData({\n\t\t\t\t\tx: prvX,\n\t\t\t\t\ty: prvY,\n\t\t\t\t\twidth: prvWidth,\n\t\t\t\t\theight: prvHeight,\n\t\t\t\t\tdata: target,\n\t\t\t\t\tfail(e) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: 'error_put',\n\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\tcomplete() {\n\t\t\t\t\t\tthis.$refs.loading.close()\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t\t// #endif\n\t\t\t\t// #ifndef MP-ALIPAY\n\t\t\t\tuni.canvasPutImageData({\n\t\t\t\t\tcanvasId: 'prv-canvas',\n\t\t\t\t\tx: prvX,\n\t\t\t\t\ty: prvY,\n\t\t\t\t\twidth: prvWidth,\n\t\t\t\t\theight: prvHeight,\n\t\t\t\t\tdata: target,\n\t\t\t\t\tfail(e) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: 'error_put',\n\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\tcomplete() {\n\t\t\t\t\t\tthis.$refs.loading.close()\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t\t// #endif\n\t\t\t},\n\t\t\tbtop(base64) {\n\t\t\t\treturn new Promise(function(resolve, reject) {\n\t\t\t\t\tvar arr = base64.split(','),\n\t\t\t\t\t\tmime = arr[0].match(/:(.*?);/)[1],\n\t\t\t\t\t\tbstr = atob(arr[1]),\n\t\t\t\t\t\tn = bstr.length,\n\t\t\t\t\t\tu8arr = new Uint8Array(n);\n\t\t\t\t\twhile (n--) {\n\t\t\t\t\t\tu8arr[n] = bstr.charCodeAt(n);\n\t\t\t\t\t}\n\t\t\t\t\treturn resolve((window.URL || window.webkitURL).createObjectURL(new Blob([u8arr], { type: mime })));\n\t\t\t\t});\n\t\t\t},\n\t\t}\n\t}\n</script>\n\n<style>\n\t.my-canvas{\n\t\tdisplay: flex;\n\t\tposition: fixed !important;\n\t\tbackground: #000000;\n\t\tleft: 0;\n\t\tz-index: 100000;\n\t\twidth: 100%;\n\t}\n\t.my-avatar {\n\t\twidth: 150upx;\n\t\theight: 150upx;\n\t}\n\t.oper-canvas {\n\t\tdisplay: flex;\n\t\tposition: fixed !important;\n\t\tleft: 0;\n\t\tz-index: 100001;\n\t\twidth: 100%;\n\t}\n\t.prv-canvas {\n\t\tdisplay: flex;\n\t\tposition: fixed !important;\n\t\tbackground: #000000;\n\t\tleft: 0;\n\t\tz-index: 200000;\n\t\twidth: 100%;\n\t}\n\t.oper-wrapper {\n\t\theight: 50px;\n\t\tposition: fixed !important;\n\t\tbox-sizing: border-box;\n\t\tborder: 1px solid #F1F1F1;\n\t\tbackground: #ffffff;\n\t\twidth: 100%;\n\t\tleft: 0;\n\t\tbottom: 0;\n\t\tz-index: 100009;\n\t\tflex-direction: row;\n\t}\n\t.oper {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\tpadding: 10upx 20upx;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbox-sizing: border-box;\n\t\talign-self: center;\n\t}\n\t.btn-wrapper {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\t/* #ifndef H5 */\n\t\tflex-grow: 1;\n\t\t/* #endif */\n\t\t/* #ifdef H5 */\n\t\theight: 50px;\n\t\t/* #endif */\n\t\tjustify-content: space-between;\n\t}\n\t.btn-wrapper view {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tfont-size: 16px;\n\t\tcolor: #333;\n\t\tborder: 1px solid #f1f1f1;\n\t\tborder-radius: 6%;\n\t}\n\t.hover {\n\t\tbackground: #f1f1f1;\n\t\tborder-radius: 6%;\n\t}\n\t.clr-wrapper {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tflex-grow: 1;\n\t}\n\t.clr-wrapper view {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tfont-size: 16px;\n\t\tcolor: #333;\n\t\tborder: 1px solid #f1f1f1;\n\t\tborder-radius: 6%;\n\t}\n\t.my-slider {\n\t\tflex-grow: 1;\n\t}\n</style>\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./yq-avatar.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./yq-avatar.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1601292250073\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}