{"version":3,"sources":["uni-app:///main.js",null,"webpack:///D:/zooseefun/zooface/pages/DIYreturnMpresult.vue?ca72","webpack:///D:/zooseefun/zooface/pages/DIYreturnMpresult.vue?1ffe","webpack:///D:/zooseefun/zooface/pages/DIYreturnMpresult.vue?9a76","uni-app:///pages/DIYreturnMpresult.vue","webpack:///D:/zooseefun/zooface/pages/DIYreturnMpresult.vue?37d4","webpack:///D:/zooseefun/zooface/pages/DIYreturnMpresult.vue?081f"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,+G;AACAA,UAAU,CAACC,0BAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACqE;AACL;AACa;;;AAG7E;AACgK;AAChK,gBAAgB,6KAAU;AAC1B,EAAE,uFAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,uLAEN;AACL,GAAG;AACH;AACA,WAAW,sNAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC7BA;AAAA;AAAA;AAAA;AAA+lB,CAAgB,2nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC8CnnB;AACA,MADA,kBACA;AACA;AACA,8CADA;AAEA,kBAFA;AAGA,eAHA;AAIA,iBAJA;AAKA,cALA;AAMA;AACA;AACA,cADA;AAEA,qBAFA,EADA;;AAKA;AACA,cADA;AAEA,qBAFA,EALA,CANA;;;AAgBA,iBAhBA;AAiBA,oBAjBA;AAkBA,uBAlBA;AAmBA,iBAnBA;AAoBA,YApBA;AAqBA,cArBA;AAsBA,cAtBA;AAuBA,eAvBA;AAwBA,eAxBA;AAyBA,yBAzBA;AA0BA,4BA1BA;AA2BA,YA3BA;AA4BA,oBA5BA;AA6BA,yBA7BA;AA8BA,kBA9BA;;AAgCA,GAlCA;AAmCA;AACA,oBADA;AAEA,8BAFA;AAGA,gCAHA,EAnCA;;AAwCA,mBAxCA,6BAwCA,GAxCA,EAwCA;AACA;AACA,+DADA;AAEA,uFAFA;;AAIA,GA7CA;AA8CA,SA9CA,qBA8CA;AACA;AACA,gBADA;AAEA;AACA;AACA;AACA;AACA,OANA;;AAQA;AACA,kBADA;AAEA;AACA;AACA;AACA;AACA,OANA;;AAQA;AACA;AACA;AACA;AACA,qDADA;AAEA,sCAFA;AAGA;AACA;AACA,+CAFA;;AAIA,SAJA;AAKA;AACA,iDADA;AAEA;AACA;AACA,aAJA,IALA,EAIA;;AAOA;AACA,OAfA;;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA,GAzFA;;AA2FA;AACA,QADA,gBACA,IADA,EACA,KADA,EACA;AACA;AACA;AACA,qDAHA,CAGA;AACA;AACA;AACA;AACA,OAHA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA,sCADA,CACA;AACA;AACA,qCAHA,CAGA;AACA;AACA;AACA,+CANA,CAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BADA;AAEA,yBAFA;AAGA,0BAHA;AAIA;AACA;AACA;AACA;AACA,aAFA,MAEA;AACA;AACA;AACA;;AAEA,WAbA,EADA;;;AAiBA,OAnBA,EAmBA,GAnBA;AAoBA,KA5CA;AA6CA,SA7CA,iBA6CA,IA7CA,EA6CA,KA7CA,EA6CA,KA7CA,EA6CA;AACA;AACA,oDAFA,CAEA;AACA;AACA;AACA;AACA;AACA,OAJA,MAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCADA,CACA;AACA;AACA,qCAHA,CAGA;AACA;AACA;AACA,+CANA,CAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BADA;AAEA,yBAFA;AAGA,0BAHA;AAIA;AACA;AACA;AACA;AACA;AACA,aAFA,MAEA;AACA;AACA;;AAEA;AACA,WAdA,EADA;;AAiBA,cAjBA;;AAmBA,OArBA,EAqBA,GArBA;AAsBA,KA1FA;AA2FA,YA3FA,oBA2FA,GA3FA,EA2FA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA,KAvGA;AAwGA,OAxGA,eAwGA,IAxGA,EAwGA,KAxGA,EAwGA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA,KAjHA;AAkHA,OAlHA,iBAkHA;AACA;AACA;AACA,6DADA;AAEA;AACA,mBADA;AAEA,gDAFA,EAFA;;AAMA,mCANA;AAOA,sBAPA;AAQA,qBARA;AASA;AACA;AACA;AACA;AACA,iEADA;AAEA;AACA,uBADA;AAEA,oDAFA,EAFA;;AAMA,4CANA;AAOA,0BAPA;AAQA,yBARA;AASA;AACA;AACA;AACA;AACA,iEADA;AAEA;AACA,qDADA;AAEA,gCAFA;AAGA,wDAHA;AAIA,6CAJA;AAKA,uDALA;AAMA,4DANA,EAFA;;AAUA;AACA;AACA;AACA;AACA;AACA,uCADA;AAEA,oDAFA;;AAIA;AACA;AACA;AACA,uCADA;AAEA,+CAFA;AAGA,6CAHA;AAIA,2CAJA;AAKA,qCALA;AAMA,2CANA;AAOA,+BAPA;AAQA;AACA;AACA;AACA,oCADA;;AAGA,uBAbA;AAcA;AACA;AACA,uBAhBA;;AAkBA,mBAtCA;;AAwCA,eApDA;;AAsDA,WAlEA;;AAoEA;AACA,KAzLA;AA0LA;AACA;AACA;AACA;AACA,iCADA;;AAGA,KAhMA;AAiMA,QAjMA,kBAiMA;AACA;AACA;AACA,4BADA;AAEA;AACA;AACA;AACA;AACA,gEADA;;AAGA;AACA;AACA,SAVA;;AAYA,KA/MA;AAgNA,YAhNA,sBAgNA;AACA;AACA;AACA;AACA,qBADA;;AAGA;AACA;AACA,eADA,mBACA,GADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA,6CADA;AAEA,qBAFA,qBAEA;AACA;AACA;AACA,+BADA;;AAGA;AACA;AACA,kCADA;AAEA;AACA;AACA,oCADA;AAEA,qCAFA;;AAIA;AACA,qBARA;AASA;AACA;AACA,oCADA;AAEA,qCAFA;;AAIA;AACA,qBAfA;;AAiBA;AACA,eA1BA;AA2BA,kBA3BA,kBA2BA;AACA;AACA,8BADA;AAEA,iCAFA;;AAIA;AACA,eAjCA;;AAmCA,WAtCA,MAsCA;AACA;AACA;AACA;AACA;AACA,8BADA;AAEA;AACA;AACA,gCADA;AAEA,iCAFA;;AAIA;AACA,iBARA;AASA;AACA;AACA,gCADA;AAEA,iCAFA;;AAIA;AACA,iBAfA;;AAiBA;AACA;AACA,SAhEA;;AAkEA,KAzRA;AA0RA,aA1RA,uBA0RA;AACA;AACA,KA5RA;AA6RA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AACA;AACA,KAvSA;AAwSA;AACA;AACA,qBADA;;AAGA,KA5SA;AA6SA;AACA;AACA,wBADA;;AAGA,KAjTA;AAkTA,SAlTA,mBAkTA,EAlTA;AAmTA;AACA;AACA,KArTA,EA3FA,E;;;;;;;;;;;;;AC9CA;AAAA;AAAA;AAAA;AAA42B,CAAgB,g3BAAG,EAAC,C;;;;;;;;;;;ACAh4B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/DIYreturnMpresult.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/DIYreturnMpresult.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./DIYreturnMpresult.vue?vue&type=template&id=6aee511b&\"\nvar renderjs\nimport script from \"./DIYreturnMpresult.vue?vue&type=script&lang=js&\"\nexport * from \"./DIYreturnMpresult.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DIYreturnMpresult.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/DIYreturnMpresult.vue\"\nexport default component.exports","export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./DIYreturnMpresult.vue?vue&type=template&id=6aee511b&\"","var components = {\n  sSwitch: function() {\n    return import(\n      /* webpackChunkName: \"components/s-switch/s-switch\" */ \"@/components/s-switch/s-switch.vue\"\n    )\n  },\n  catSignature: function() {\n    return import(\n      /* webpackChunkName: \"components/cat-signature/cat-signature\" */ \"@/components/cat-signature/cat-signature.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function() {\n      _vm.flag = true\n      _vm.oldmotto = _vm.motto\n    }\n\n    _vm.e1 = function() {\n      return (_vm.flag = false)\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./DIYreturnMpresult.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./DIYreturnMpresult.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t\t<view class=\"top\" ><s-switch @switchValue=\"getSwitchValue\" :defaultValue=\"0\" :switchList=\"arr\"></s-switch></view>\r\n\t\t\t<view class=\"main\" >\r\n\t\t\t\t<canvas canvas-id=\"myCanvass\" class=\"canvas\"></canvas>\r\n\t\t\t\t<canvas canvas-id=\"myCanvas\" class=\"canvas\"></canvas>\r\n\t\t\t\t<image :src=\"path\" mode=\"aspectFit\"></image>\r\n\t\t\t\t<image class=\"again\" src=\"http://img.zooseefun.net/mpresult/again.png\" @click=\"again\"></image>\r\n\t\t\t\t<image class=\"more\" src=\"../static/more.png\" @click=\"more\"></image>\r\n\t\t\t\t<image\r\n\t\t\t\t\tsrc=\"../static/downLoad.png\"\r\n\t\t\t\t\tstyle=\"width: 96upx;height: 96upx;position: absolute;top:130rpx;right: 13upx;\"\r\n\t\t\t\t\t@click=\"download\" v-if=\"show\" :class=\"show==true?'animated bounceIn':''\"\r\n\t\t\t\t></image>\r\n\t\t\t\t<image class=\"modify\" v-if=\"show\" :class=\"show==true?'animated bounceIn':''\" src=\"http://img.zooseefun.net/mpresult/modify.png\" @click = \"()=>{flag = true; oldmotto=motto;}\"></image>\r\n\t\t\t\t<image class=\"DIY\" v-if=\"show\" :class=\"show==true?'animated bounceIn':''\" src=\"../static/DIY.png\" @click=\"DIY\"></image>\r\n\t\t\t</view>\r\n\t\t\t<scroll-view scroll-x=\"true\" scroll-left=\"120\" style=\"white-space: nowrap;margin-top: 30upx;\">\r\n\t\t\t\t<image @click=\"btn(i, index)\" id=\"item\" v-for=\"(i, index) in array\" :key=\"index\" :src=\"i\" class=\"img\" :class=\"{ imgbtn: index === active }\"></image>\r\n\t\t\t</scroll-view>\r\n\t\t\t<view style=\"width: 100%;height: 166upx;margin-top: 30upx;margin-left: 43upx;\">\r\n\t\t\t\t<image :src=\"loadPic\" style=\"width: 120upx;height: 120upx;float: left;\"></image>\r\n\t\t\t\t<view class=\"log\">\r\n\t\t\t\t\t<view class=\"te\">WOW,变成动物的你可爱程度超过了{{ num }}%的用户，快去跟你的好友PK一下</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<button class=\"go\" open-type=\"share\"></button>\r\n\t\t\t</view>\r\n\t\t\t<!-- <view style=\"margin-top: 20upx;\">\r\n\t\t\t\t<view v-if=\"pay_info.isPay=='1'\" class=\"money\">\r\n\t\t\t\t\t<span>￥</span>\r\n\t\t\t\t\t<span>{{pay_info.pay_amount / 100}}</span>\r\n\t\t\t\t</view>\r\n\t\t\t\t<button v-if=\"pay_info.isPay=='1'\" class=\"share\" @click=\"pay\">\r\n\t\t\t\t\t<image src=\"http://img.zooseefun.net/mpresult/wechatpay.png\"></image>\r\n\t\t\t\t\t<text style=\"padding-left: 5px;\">去支付</text>\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\t\t\t<view v-if=\"pay_info.isPay=='1'\" class=\"djright\" @click=\"openOrder\"><text>订单</text></view> -->\n\t\t\t<cat-signature canvasId=\"sign\"  @close=\"()=>flag=false\" @save=\"setmotto\" :visible=\"flag\"/>\n\t\t</view>\r\n</template>\r\n\r\n<script>\r\nimport sswitch from '@/components/s-switch/s-switch.vue';\nimport catsignature from \"@/components/cat-signature/cat-signature.vue\";\r\nimport uniTransition from \"@/components/uni-transition/uni-transition.vue\"\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\n\t\t\tpay_info:{isPay: '1', pay_amount: 10},\n\t\t\toldmotto: '',\n\t\t\tmotto: '',\n\t\t\tflag: false,\r\n\t\t\tpath: '',\r\n\t\t\tarr: [\r\n\t\t\t\t{\r\n\t\t\t\t\tkey: 0,\r\n\t\t\t\t\tvalue: '动物图像'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tkey: 1,\r\n\t\t\t\t\tvalue: '对比图像'\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tshow:false,\r\n\t\t\tanimal_pic: '',\r\n\t\t\tanimal_pic_co: '',\r\n\t\t\tloadPic: '',\r\n\t\t\tnum: 0,\r\n\t\t\tname: '',\r\n\t\t\tcode: '',\r\n\t\t\tarray: [],\r\n\t\t\tactive: 0,\r\n\t\t\tanimal_pic_back: '',\r\n\t\t\tanimal_pic_co_back: '',\r\n\t\t\tkey: 0,\r\n\t\t\tpullAnimal: '',\r\n\t\t\tpullAnimalHuman: '',\r\n\t\t\tlocation:''\r\n\t\t};\r\n\t},\r\n\tcomponents: {\r\n\t\tsswitch,\n\t\tcatsignature,\r\n\t\tuniTransition\r\n\t},\r\n\tonShareAppMessage(res) {\r\n\t\treturn {\r\n\t\t\ttitle: '我在zooface里变成动物后可爱度打败了' + this.num + '%的人，快来挑战我吧~',\r\n\t\t\tpath: '/pages/pk?num=' + this.num + '&pic=' + this.loadPic + '&name=' + this.name\r\n\t\t};\r\n\t},\r\n\tonReady(){\r\n\t\tuni.getStorage({\r\n\t\t\tkey:\"DIY\",\r\n\t\t\tsuccess:res =>{\r\n\t\t\t\tthis.animal_pic = res.data\r\n\t\t\t\tthis.animal_pic_back = res.data\r\n\t\t\t\tthis.draw(this.animal_pic_back,\"\")\r\n\t\t\t}\r\n\t\t});\r\n\t\tuni.getStorage({\r\n\t\t\tkey:\"human\",\r\n\t\t\tsuccess:result =>{\r\n\t\t\t\tthis.animal_pic_co = result.data;\r\n\t\t\t\tthis.animal_pic_co_back = result.data;\r\n\t\t\t\tthis.draw2(this.animal_pic_back,this.animal_pic_co_back,\"\")\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.pay_info = uni.getStorageSync(\"pay_info\");\r\n\t\t//测试配置模板\r\n\t\tthis.location = uni.getStorageSync(\"location\");\t\r\n\t\tuni.request({\r\n\t\t\turl:\"https://faceback.zooseefun.net/zoo/ampic\",\r\n\t\t\tdata: {zooname : this.location},\r\n\t\t\tsuccess: res =>{\r\n\t\t\t\tthis.array = res.data.ampic;\r\n\t\t\t\tthis.array.unshift('../static/0.png');\r\n\t\t\t\t\r\n\t\t\t\tfor (let v = 1; v < this.array.length; v++) {\r\n\t\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\t\turl: Object.values(this.array[v])[0],\r\n\t\t\t\t\t\tsuccess: res=>{\r\n\t\t\t\t\t\t\tthis.array[v] = res.tempFilePath;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet pic = JSON.parse(uni.getStorageSync('animalPic'));\r\n\t\tthis.loadPic = pic.path;\r\n\t\tthis.name = pic.name;\r\n\t\tuni.showShareMenu();\r\n\t\tthis.num = Math.floor(Math.random() * (1 - 100) + 100);\r\n\t\tconsole.log(this);\r\n\t},\r\n\t\r\n\tmethods: {\r\n\t\tdraw(path, path2) {\r\n\t\t\t//let photoframe\r\n\t\t\tuni.showLoading({title:'生成中...'});\r\n\t\t\tvar ctx = uni.createCanvasContext('myCanvass'); //绑定画布\r\n\t\t\tif(path2){\r\n\t\t\t\tctx.drawImage(path, 426, 15, 950, 1050); \r\n\t\t\t\tctx.drawImage(path2, 0, 0, 1795, 1205);\r\n\t\t\t}\t\r\n\t\t\telse{\r\n\t\t\t\t\tctx.drawImage(path, 276, 0, 1100, 1205);\r\n\t\t\t\t}\r\n\t\t\tif (this.motto){\r\n\t\t\t\tif (this.motto.key==1) ctx.drawImage(this.motto.value, 1795 / 2 - 250 ,50, 500, 250);\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tctx.setFillStyle('#544e45')  //设置内容1的文字样式\r\n\t\t\t\t\t\tctx.font = '70px 微软雅黑';\r\n\t\t\t\t\t\tctx.setTextAlign('center')  //设置对于坐标点的对齐方式\r\n\t\t\t\t\t\tctx.translate(1530, 194);\r\n\t\t\t\t\t\tctx.rotate(30 * Math.PI / 180);\r\n\t\t\t\t\t\tctx.fillText(this.motto.value,0,0); //计算距离，将文字定位于图片的某处\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tctx.draw()\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\t//不加延迟的话，img有时候会赋予undefined\r\n\t\t\t\tuni.canvasToTempFilePath(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcanvasId: 'myCanvass',\r\n\t\t\t\t\t\tdestWidth: 1795, \r\n\t\t\t\t\t\tdestHeight: 1205,\r\n\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\tthis.animal_pic = res.tempFilePath;\r\n\t\t\t\t\t\t\tif (this.key === 0) {\r\n\t\t\t\t\t\t\t\tthis.path = this.animal_pic;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.path = this.animal_pic_co;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t);\r\n\t\t\t}, 800);\r\n\t\t},\r\n\t\tdraw2(path, path1,path2) {\r\n\t\t\tuni.showLoading({title:'生成中...'});\r\n\t\t\tvar ctx = uni.createCanvasContext('myCanvas'); //绑定画布\r\n\t\t\t\t\tif (path2){\r\n\t\t\t\t\t\tctx.drawImage(path, 176, 132, 850, 950);\r\n\t\t\t\t\t\tctx.drawImage(path1, 1000, 350, 700, 700);\n\t\t\t\t\t\tctx.drawImage(path2, 0, 0, 1795, 1205);\n\t\t\t\t\t}\telse{\n\t\t\t\t\t\tctx.drawImage(path, 0, 0, 1000, 1100);\r\n\t\t\t\t\t\tctx.drawImage(path1, 950, 250, 800, 800);\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.motto){\r\n\t\t\t\t\t\tif (this.motto.key==1) ctx.drawImage(this.motto.value, 1795 / 2 - 250 ,50, 500, 250);\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tctx.setFillStyle('#544e45')  //设置内容1的文字样式\r\n\t\t\t\t\t\t\t\tctx.font = '70px 微软雅黑';\r\n\t\t\t\t\t\t\t\tctx.setTextAlign('center')  //设置对于坐标点的对齐方式\r\n\t\t\t\t\t\t\t\tctx.translate(1530, 194);\r\n\t\t\t\t\t\t\t\tctx.rotate(30 * Math.PI / 180);\r\n\t\t\t\t\t\t\t\tctx.fillText(this.motto.value,0,0); //计算距离，将文字定位于图片的某处\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t}\n\t\t\t\t\tctx.draw();\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t//不加延迟的话，img有时候会赋予undefined\r\n\t\t\t\t\t\tuni.canvasToTempFilePath(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tcanvasId: 'myCanvas',\r\n\t\t\t\t\t\t\t\tdestWidth: 1795,\r\n\t\t\t\t\t\t\t\tdestHeight: 1205,\r\n\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\t\tthis.animal_pic_co = res.tempFilePath;\r\n\t\t\t\t\t\t\t\t\tif (this.key === 0) {\r\n\t\t\t\t\t\t\t\t\t\tthis.path = this.animal_pic;\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tthis.path = this.animal_pic_co;\r\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tthis\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}, 800);\r\n\t\t},\r\n\t\tsetmotto(res){\r\n\t\t\tthis.flag = false;\r\n\t\t\tthis.motto = res;\r\n\t\t\tconsole.log(res);\r\n\t\t\t\r\n\t\t\tif (this.active == 0){\r\n\t\t\t\tthis.draw(this.animal_pic_back, '');\r\n\t\t\t\tthis.draw2(this.animal_pic_back,this.animal_pic_co_back, '');\r\n\t\t\t}else{\r\n\t\t\t\tthis.draw(this.animal_pic_back, path, this.array[this.active]);\r\n\t\t\t\tthis.draw2(this.animal_pic_back,this.animal_pic_co_back, this.array[this.active]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tbtn(path, index) {\r\n\t\t\tthis.active = index;\r\n\t\t\tif (index === 0) {\r\n\t\t\t\tthis.draw(this.animal_pic_back, '');\r\n\t\t\t\tthis.draw2(this.animal_pic_back,this.animal_pic_co_back, '');\r\n\t\t\t} else {\r\n\t\t\t\tthis.draw(this.animal_pic_back, path);\r\n\t\t\t\tthis.draw2(this.animal_pic_back,this.animal_pic_co_back, path);\r\n\t\t\t}\r\n\t\t},\r\n\t\tpay() {\r\n\t\t\t{\r\n\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\turl: 'https://faceback.zooseefun.net/image/payinit',\r\n\t\t\t\t\tformData: {\r\n\t\t\t\t\t\ttype: 1,\r\n\t\t\t\t\t\topenid: uni.getStorageSync('openid')\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfilePath: this.animal_pic,\r\n\t\t\t\t\tname: 'file',\r\n\t\t\t\t\tasync: true,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tconsole.log(JSON.parse(res.data).path);\r\n\t\t\t\t\t\tthis.pullAnimal = JSON.parse(res.data).path;\r\n\t\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\t\turl: 'https://faceback.zooseefun.net/image/payinit',\r\n\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\ttype: 1,\r\n\t\t\t\t\t\t\t\topenid: uni.getStorageSync('openid')\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfilePath: this.animal_pic_co,\r\n\t\t\t\t\t\t\tname: 'file',\r\n\t\t\t\t\t\t\tasync: true,\r\n\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\tthis.pullAnimalHuman = JSON.parse(res.data).path;\r\n\t\t\t\t\t\t\t\tconsole.log(11);\r\n\t\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\t\turl: 'https://faceback.zooseefun.net/order/pay',\r\n\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\tmoney: this.pay_info.pay_amount,\r\n\t\t\t\t\t\t\t\t\t\tbody: '打印照片',\r\n\t\t\t\t\t\t\t\t\t\topenid: uni.getStorageSync('openid'),\r\n\t\t\t\t\t\t\t\t\t\tanimal: this.pullAnimal,\r\n\t\t\t\t\t\t\t\t\t\tanimalhuman: this.pullAnimalHuman,\r\n\t\t\t\t\t\t\t\t\t\tlocation: uni.getStorageSync('location')\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\t\t\tlet resa = res.data;\r\n\t\t\t\t\t\t\t\t\t\tthis.code = resa.code;\r\n\t\t\t\t\t\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\t\t\t\t\t\tcode: this.code,\r\n\t\t\t\t\t\t\t\t\t\t\tanimal: this.pullAnimalHuman\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\t\t\t\t\t\tuni.setStorageSync('pay', JSON.stringify(data));\r\n\t\t\t\t\t\t\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\t\t\t\t\t\t\tprovider: 'wxpay',\r\n\t\t\t\t\t\t\t\t\t\t\ttimeStamp: resa.timeStamp,\r\n\t\t\t\t\t\t\t\t\t\t\tnonceStr: resa.nonceStr,\r\n\t\t\t\t\t\t\t\t\t\t\tpackage: resa.package,\r\n\t\t\t\t\t\t\t\t\t\t\tsignType: 'MD5',\r\n\t\t\t\t\t\t\t\t\t\t\tpaySign: resa.paySign,\r\n\t\t\t\t\t\t\t\t\t\t\t_debug: 1,\r\n\t\t\t\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\turl: 'pay'\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\topenOrder: function() {\r\n\t\t\tlet pages = getCurrentPages();\r\n\t\t\tlet page = pages[pages.length - 1].route.split('/')[1];\r\n\t\t\tuni.redirectTo({\r\n\t\t\t\turl: 'order?page=' + page\r\n\t\t\t});\r\n\t\t},\r\n\t\tscan() {\r\n\t\t\tlet code = this.code;\r\n\t\t\tuni.scanCode({\r\n\t\t\t\tonlyFromCamera: true,\r\n\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tlet printcode = res.result.split('code=')[1];\r\n\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\turl: 'print?code=' + printcode + '&img_code=' + code\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconsole.log('条码类型：' + res.scanType);\r\n\t\t\t\t\tconsole.log('条码内容：' + res.result);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tdownload() {\r\n\t\t\tconst path = this.path;\r\n\t\t\tconst active=this.active\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '正在保存'\r\n\t\t\t});\r\n\t\t\tconsole.log(11);\r\n\t\t\tuni.getSetting({\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tif (!res.authSetting['scope.writePhotosAlbum']) {\r\n\t\t\t\t\t\tconsole.log('未授权');\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tuni.authorize({\r\n\t\t\t\t\t\t\tscope: 'scope.writePhotosAlbum',\r\n\t\t\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\t\t\tconsole.log('授权成功');\r\n\t\t\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\t\t\ttitle: '正在保存'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\t\t\t\tfilePath: path,\r\n\t\t\t\t\t\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: '保存成功'\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tfail: function() {\r\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: '保存失败'\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail() {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\ttitle: '用户拒绝授权'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log('已授权');\r\n\t\t\t\t\t\tconsole.log(path);\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\t\tfilePath: path,\r\n\t\t\t\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\t\ttitle: '保存成功'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: function() {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\t\ttitle: '保存失败'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tsaveAlbum() {\r\n\t\t\tconsole.log(1);\r\n\t\t},\r\n\t\tgetSwitchValue: function(e) {\r\n\t\t\tthis.key = e.key;\n\t\t\t{\r\n\t\t\t\tif (e.key === 0) {\r\n\t\t\t\t\tthis.path = this.animal_pic;\r\n\t\t\t\t} else if (e.key === 1) {\r\n\t\t\t\t\tthis.path = this.animal_pic_co;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconsole.log(this.path);\r\n\t\t},\r\n\t\tagain: function() {\r\n\t\t\tuni.redirectTo({\r\n\t\t\t\turl: 'select'\r\n\t\t\t});\r\n\t\t},\r\n\t\tDIY:function(){\r\n\t\t\tuni.redirectTo({\r\n\t\t\t\turl:\"DIYresult\"\r\n\t\t\t})\r\n\t\t},\r\n\t\tshare() {},\r\n\t\tmore:function(){\r\n\t\t\tthis.show = !this.show\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style>\r\n.money {\r\n\tcolor: #ec8d5c;\r\n\tfloat: left;\r\n\tfont-size: 60upx;\r\n\tmargin-top: 20upx;\r\n\tmargin-left: 50upx;\r\n}\r\n.top {\r\n\tmargin-top: 20upx;\r\n}\n\n.box{\n\theight:100%;\n\twidth: 100%;\n\tz-index: 9999999;\n\t\n\tposition: absolute;\n\ttop:0;\n\tleft:0\n}\n\r\n\r\n.main image {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n}\r\n\r\n.main {\r\n\twidth: 752upx;\r\n\theight: 506upx;\r\n\tmargin-top: 40upx;\r\n\tbackground-color: #d8d8d8;\r\n\tposition: relative;\r\n}\n\n.modify{\n\twidth : 95upx !important;\n\theight: 95upx !important;\n\tposition :absolute;\n\tright : 16upx;\n\ttop: 240rpx;\n}\n\n\r\n.again {\r\n\twidth: 95rpx !important;\r\n\theight: 95rpx !important;\r\n\tposition: absolute;\r\n\tleft: 0;\r\n\tbottom: -10upx;\r\n}\r\n.share {\r\n\tbackground: url('http://img.zooseefun.net/mpresult/btn.png') no-repeat;\r\n\tbackground-size: 100% 100%;\r\n\twidth: 334upx;\r\n\theight: 122upx;\r\n\tmargin-top: 10upx;\r\n\ttext-align: center;\r\n\tcolor: #ffffff;\r\n\tline-height: 122upx;\r\n\tfloat: right;\r\n\tfont-size: 30upx;\r\n\tmargin-right: 30upx;\r\n}\r\n.share image {\r\n\twidth: 52upx;\r\n\theight: 48upx;\r\n\tvertical-align: middle;\r\n}\r\n.log {\r\n\tbackground: url('http://img.zooseefun.net/mpresult/log.png') no-repeat;\r\n\tbackground-size: 100% 100%;\r\n\twidth: 386upx;\r\n\theight: 166upx;\r\n\tcolor: #555555;\r\n\tfloat: left;\r\n}\r\n.go {\r\n\tbackground: url('http://img.zooseefun.net/mpresult/go.png') no-repeat;\r\n\tbackground-size: 100% 100%;\r\n\twidth: 155upx;\r\n\theight: 155upx;\r\n\tborder: none !important;\r\n\tfloat: left;\r\n}\r\n.go:after {\r\n\tborder: none !important;\r\n}\r\n.te {\r\n\tfont-size: 20upx;\r\n\theight: 91upx;\r\n\twidth: 255upx;\r\n\tmargin-left: 74upx;\r\n\tmargin-top: 32upx;\r\n\tcolor: #ffffff;\r\n}\r\n.share:after {\r\n\tborder: none !important;\r\n}\r\nhtml,\r\nbody {\r\n\tpadding-top: 130upx !important;\r\n\tposition: fixed;\r\n}\r\n.img {\r\n\twidth: 178upx;\r\n\theight: 120upx;\r\n\tmargin-left: 50upx;\r\n}\r\n.canvas {\r\n\twidth: 1795px;\r\n\theight: 1205px;\r\n\tposition: absolute;\r\n\ttop: -9999999px;\r\n}\r\n.imgbtn {\r\n\tborder: 10upx solid #007aff;\r\n}\r\n.DIY{\r\n\twidth: 95rpx !important;\r\n\theight: 95rpx !important;\r\n\tposition: absolute;\r\n\ttop: 349rpx;\r\n\tleft: 642rpx;\r\n}\r\n.more{\r\n\twidth: 95rpx !important;\r\n\theight: 95rpx !important;\r\n\tposition: absolute;\r\n\ttop: 20rpx;\r\n\tleft: 642rpx;\r\n}\r\n</style>\n","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./DIYreturnMpresult.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./DIYreturnMpresult.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1601294428794\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}